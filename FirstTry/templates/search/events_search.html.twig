{% extends 'base.html.twig' %}

{% block title %}Events search{% endblock %}

{% block body %}

{% for message in app.flashes("subscription_success") %}
    <div class="alert alert-success">
        {{message}}
    </div>
{% endfor %}
{% for message in app.flashes("event_delete_success") %}
    <div class="alert alert-success">
        {{message}}
    </div>
{% endfor %}
{% for message in app.flashes("event_update_success") %}
    <div class="alert alert-success">
        {{message}}
    </div>
{% endfor %}
{% for message in app.flashes("event_create_success") %}
    <div class="alert alert-success">
        {{message}}
    </div>
{% endfor %}



<header>
    <h1>All the events are here</h1>
</header>

{% if is_granted ("ROLE_ADMIN") %}
<a href="{{ path ('create_event')}}">Create new event</a>
{# Page to search the event to update it#}
{# <a href="{{ path ('update_events')}}">Update an event</a> #}
{% endif %}


{{ form_errors(form) }}
<div class="login-block">
    <h1>Search your events here</h1>
    {{ form_start(form, {"attr" : {"id": "SearchForm"}}) }}
    {{form_widget(form.search)}}
    {{ form_end(form) }}
</div>
<br>
<div id ="SearchResult">
{# In controller: if no research put all the events #}
    <ul>
        {% for event in events %}
        <li>
        <a href="{{ path ('event',{id:event.id})}}">{{event.title}}</a>
        {% if is_granted("ROLE_ADMIN") %}
        <a href="{{ path ('update_event', {id:event.id})}}">✏️</a>
        <a href="{{ path ('delete_event', {id:event.id})}}">🪦</a>
        {% endif %}

        </li>
            
        {% endfor %}
    </ul>
</div>




{% endblock %}
